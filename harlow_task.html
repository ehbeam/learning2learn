<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
    <title>Harlow Task</title>
	<style>

		* { 
          	font-family: Avenir;
          	padding: 0; 
          	margin: 0; 
        }

        body {
        	-webkit-touch-callout: none;
		    -webkit-user-select: none;
		    -khtml-user-select: none;
		    -moz-user-select: none;
		    -ms-user-select: none;
		    user-select: none;
        }

		.canvas {
			border: 2px solid black; 
			border-radius: 10px;
			cursor: pointer;
			margin: 20px;
			background-color: white;
			box-shadow: 3px 3px 5px #9b9b9b;
		}

		.canvas:hover {
          box-shadow: 0px 0px 20px #d3c472;
        }

		.taskImg {
			display: none;
		}

		#scoreBoard {
			font-size: 34px;
			width: 700px; 
			height: 85px; 
			background: #e2e2e2; 
			border-radius: 25px;
			display: table-cell; 
			vertical-align: middle;
		}

		#congrats {
			font-size: 60px;
		}

	</style>
</head>
<body>

<div width="800px" height="800px">

	<img id="airplane" class="taskImg" src="https://raw.githubusercontent.com/ehbeam/learning2learn/master/images/airplane.png" />
	<img id="banana" class="taskImg" src="https://raw.githubusercontent.com/ehbeam/learning2learn/master/images/banana.png" />
	<img id="camera" class="taskImg" src="https://raw.githubusercontent.com/ehbeam/learning2learn/master/images/camera.png" />
	<img id="cat" class="taskImg" src="https://raw.githubusercontent.com/ehbeam/learning2learn/master/images/cat.png" />
	<img id="cupcake" class="taskImg" src="https://raw.githubusercontent.com/ehbeam/learning2learn/master/images/cupcake.png" />
	<img id="dog" class="taskImg" src="https://raw.githubusercontent.com/ehbeam/learning2learn/master/images/dog.png" />
	<img id="donut" class="taskImg" src="https://raw.githubusercontent.com/ehbeam/learning2learn/master/images/donut.png" />
	<img id="fox" class="taskImg" src="https://raw.githubusercontent.com/ehbeam/learning2learn/master/images/fox.png" />
	<img id="icecream" class="taskImg" src="https://raw.githubusercontent.com/ehbeam/learning2learn/master/images/icecream.png" />
	<img id="pizza" class="taskImg" src="https://raw.githubusercontent.com/ehbeam/learning2learn/master/images/pizza.png" />
	<img id="shell" class="taskImg" src="https://raw.githubusercontent.com/ehbeam/learning2learn/master/images/shell.png" />
	<img id="umbrella" class="taskImg" src="https://raw.githubusercontent.com/ehbeam/learning2learn/master/images/umbrella.png" />

	<img id="BLANK" class="taskImg" src="https://raw.githubusercontent.com/ehbeam/learning2learn/master/images/BLANK.png" />
	<img id="YES" class="taskImg" src="https://raw.githubusercontent.com/ehbeam/learning2learn/master/images/YES.png" />
	<img id="NO" class="taskImg" src="https://raw.githubusercontent.com/ehbeam/learning2learn/master/images/NO.png" />

	<br/><br/>

	<center>
		<canvas id="canvasA" class="canvas" width="300" height="300"></canvas>
		<canvas id="canvasB" class="canvas" width="300" height="300"></canvas>
	</center>

	<br/><br/>

	<center>
		<span id="congrats"></span>
		<div id="scoreBoard">
			<p>Score: <span id="score"></span></p>
		</div>
	</center>

</div>

<script>

	var imagesA = ["cat", "airplane", "shell", "dog", "donut", "icecream"];
	var imagesB = ["cupcake", "fox", "banana", "camera", "pizza", "umbrella"];

	var correct = ["A", "B", "B", "A", "A", "B"]

	var nTrials = 0; var nEpochs = 0; var nPoints = 0; var scores = [];
	var dx = 20; var dy = 20; var width = 250; var height = 250;

	window.onload = function() {

	  document.getElementById("score").innerHTML = nPoints;

	  var cA = document.getElementById("canvasA");
	  var ctxA = cA.getContext("2d");
	  var imgA = document.getElementById(imagesA[nEpochs]);
	  ctxA.drawImage(imgA, dx, dy, width, height);

	  var cB = document.getElementById("canvasB");
	  var ctxB = cB.getContext("2d");
	  var imgB = document.getElementById(imagesB[nEpochs]);
	  ctxB.drawImage(imgB, dx, dy, width, height);

	  var toggle = "OFF"
	  document.getElementById("canvasA").addEventListener("click", function(){
	  	if (nEpochs < 6) {
	  		if (nTrials < 6) {
		  		if (toggle == "OFF") {
			  		toggle = "ON";
			  		nTrials = nTrials + 1;
				  	if (correct[nEpochs] == "A") {
				  		ctxA.globalAlpha = 0.65;
				  		var imgA = document.getElementById("YES");
				  		ctxA.drawImage(imgA, 0, 0, width+50, height+50);
				  		ctxA.globalAlpha = 1.0;
				  		nPoints = nPoints + 1;
				  		document.getElementById("score").innerHTML = nPoints;
				  	} else {
				  		ctxA.globalAlpha = 0.65;
				  		var imgA = document.getElementById("NO");
				  		ctxA.drawImage(imgA, 0, 0, width+50, height+50);
				  		ctxA.globalAlpha = 1.0;
				  		document.getElementById("score").innerHTML = nPoints;
			  	}
			  } else {
			  	toggle = "OFF";
			  	var imgBlank = document.getElementById("BLANK");
			  	ctxA.drawImage(imgBlank, dx, dy, width, height);
			  	var imgA = document.getElementById(imagesA[nEpochs]);
			  	ctxA.drawImage(imgA, dx, dy, width, height);
			  	ctxB.drawImage(imgBlank, dx, dy, width, height);
			  	var imgB = document.getElementById(imagesB[nEpochs]);
			  	ctxB.drawImage(imgB, dx, dy, width, height);
			  	document.getElementById("score").innerHTML = nPoints;
			  } 
			} else {
		  	  nTrials = 0; 
		  	  nEpochs = nEpochs + 1;
		  	  scores.push(nPoints);
		  	  nPoints = 0;
		  	}
	  } else {
	  	  document.getElementById("canvasA").style.display = "none";
	  	  document.getElementById("canvasB").style.display = "none";
	  	  document.getElementById("congrats").innerHTML = "You finished!<br/><br/>";
	  	  document.getElementById("scoreBoard").innerHTML = "Scores: " + scores.join(", ");
	  	}
	  });

	  document.getElementById("canvasB").addEventListener("click", function(){
	  	if (nEpochs < 6) {
	  		if (nTrials < 6) {
		  		if (toggle == "OFF") {
				  	toggle = "ON";
				  	nTrials = nTrials + 1;
				  	if (correct[nEpochs] == "B") {
				  		ctxB.globalAlpha = 0.65;
				  		var imgB = document.getElementById("YES");
				  		ctxB.drawImage(imgB, 0, 0, width+50, height+50);
				  		ctxB.globalAlpha = 1.0;
				  		nPoints = nPoints + 1;
				  		document.getElementById("score").innerHTML = nPoints;
				  	} else {
				  		ctxB.globalAlpha = 0.65;
				  		var imgB = document.getElementById("NO");
				  		ctxB.drawImage(imgB, 0, 0, width+50, height+50);
				  		ctxB.globalAlpha = 1.0;
				  		document.getElementById("score").innerHTML = nPoints;
				  	}
				  } else {
				  	toggle = "OFF";
				  	var imgBlank = document.getElementById("BLANK");
			  		ctxA.drawImage(imgBlank, dx, dy, width, height);
				  	var imgA = document.getElementById(imagesA[nEpochs]);
				  	ctxA.drawImage(imgA, dx, dy, width, height);
				  	ctxB.drawImage(imgBlank, dx, dy, width, height);
				  	var imgB = document.getElementById(imagesB[nEpochs]);
				  	ctxB.drawImage(imgB, dx, dy, width, height);
				  	document.getElementById("score").innerHTML = nPoints;
				  } 
		  	} else {
			  nTrials = 0; 
		      nEpochs = nEpochs + 1;
		      scores.push(nPoints);
		      nPoints = 0;
			}
	  	} else {
	  	  document.getElementById("canvasA").style.display = "none";
	  	  document.getElementById("canvasB").style.display = "none";
	  	  document.getElementById("congrats").innerHTML = "You finished!<br/><br/>";
	  	  document.getElementById("scoreBoard").innerHTML = "Scores: " + scores.join(", ");
	  	}	
	 });

	};

</script>

</body>
</html>
